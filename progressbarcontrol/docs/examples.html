<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>ProgressbarControl Documentation: Examples</title>
<link rel="stylesheet" type="text/css" href="http://code.google.com/css/codesite.css"></link>
    <link rel="stylesheet" type="text/css" href="http://gmaps-utility-library.googlecode.com/svn/trunk/util/docs/template/local_extensions.css"></link>
    <script type="text/javascript" src="http://code.google.com/js/prettify.js"></script>
  </head>

  <body onload="prettyPrint()">
<h1>Progressbar Control Examples</h1>

<p>To use the progress bar, create a <code>ProgressbarControl</code> object by passing 
the GMap2 object and (optional) options to the constructor.</p>
<pre class="prettyprint">
var map = new GMap2(document.getElementById("map"));
map.setCenter(new GLatLng(37, -122), 13);
var progressbar = new ProgressbarControl(map);
</pre>

<p>You may also specify a number of options to customize. 
These options are passed via a  <code>ProgressbarControlOptions</code> object which 
is fully outlined in the <a href="reference.html#ProgressbarControlOptions">reference documentation</a>.</p>

<p>
The <code>ProgressbarControlOptions</code> object is an object literal, so you 
simply declare the object without a constructor. In this example the 
<code>width</code> of the progress bar is set to 150 pixels, the text that is 
printed before <b>any</b> progress (<code>loadstring</code>) is made is set to 
"One moment please...".
</p>
<pre class="prettyprint">
var map = new GMap2(document.getElementById("map"));
map.setCenter(new GLatLng(37, -122), 13);
var progressbarOptions = { width: 150, loadstring: 'One moment please' };
var progressbar = new ProgressbarControl(map, progressbarOptions);
</pre>

<h2>Progressbar Example</h2>

<p>The following example show how you can use the progressbar to show live progress:</p>

<p>Some notes, please remember that a browser will 
NOT update the display if it doesn't get the time. The trick is to use 
setTimeout to create a 1 millisecond delay. This will tell the browser to take the time 
to draw the screen.</p>

<h3> An example with the progress bar used for loading and removing markers:</h3>
<pre class="prettyprint">
function doLoad() {
    if (GBrowserIsCompatible()) {
        map = new GMap2(document.getElementById("map"), {draggableCursor:"crosshair"});
        map.setCenter(new GLatLng(parseFloat(52), parseFloat(4)), 7);
        map.addControl(new GScaleControl());
        map.addControl(new GLargeMapControl());
        map.addControl(new GMapTypeControl());
        
        oProgressBar = new ProgressbarControl(map, {width:150});
    } 
}

// Create setting for the demo
var aMarkers = [];
var iMax = 200;
var i = 0;    

// Load 25 markers onto map
function loadMarkers(){
    oProgressBar.start(iMax);
    setTimeout('createMarker()', 10);
}

// create a marker
function createMarker(){
    i++;
    
    oProgressBar.updateLoader(1);
    
    // Add 10 markers to the map at random locations
    var bounds = map.getBounds();
    var southWest = bounds.getSouthWest();
    var northEast = bounds.getNorthEast();
    var lngSpan = northEast.lng() - southWest.lng();
    var latSpan = northEast.lat() - southWest.lat();
    var point = new GLatLng(southWest.lat() + latSpan * Math.random(), southWest.lng() + lngSpan * Math.random());
      
    var marker = new GMarker(point);
    
    aMarkers.push(marker);
    
    map.addOverlay(marker);
    
    if ( i < iMax ) {
        setTimeout('createMarker()', 10);
    } else {
        oProgressBar.remove();
        i = 0;
    }
        
}



function removeMarkers(){
    oProgressBar.start(aMarkers.length);
    setTimeout("removeMarker()", 10);
    
}


function removeMarker(){
    oProgressBar.updateLoader(1);
    map.removeOverlay(aMarkers.pop());
    if ( aMarkers.length > 0 ) {
        setTimeout("removeMarker()", 10);
    } else {
        oProgressBar.remove();
    }
}
</pre>
<p><a href="../examples/howtouse.html">View example (howtouse.html)</a></p>

</body>
</html>